### Небольшой бот для парсинга цен в интернет-магазинах.

#### Функционал:
1. Пользователь прикрепляет excel-файл (.xlsx или .xls формата) и отправляет боту.

| name    |         url         |          xpath |
|---------|:-------------------:|---------------:|
| Example | https://example.com | //example-path |

2. Бот сохраняет файл в директорию [files/](files)
3. Открывает файл с помощью библиотеки pandas
4. Отправляет пользователю сообщение с кратким содержанием файла
5. Сохраняет содержимое в базу данных (локальная SQLite), добавляя uid пользователя
6. Делает запросы на адреса перечисленные во втором столбце
7. Отправлеет пользователю сообщение с количеством проверенных ссылок и средней ценой.


#### Запуск проекта
1. Клонировать репозиторий
```bash
git clone git@github.com:viator3m/bot_mayak.git
cd bot_mayak
```
2. Установка зависимостей и активация виртуального окружения
```bash
poetry install
poetry shell
```
3. Создать файл с переменными окружения и записать в него телеграмм токен
```bash
touch .env
echo TOKEN=your_telegram_token >> .env
```
3. Запуск бота
```bash
poetry run python bot.py
```

Если необходимо, то установить poetry-dotenv
```bash
poetry self add poetry-dotenv
```
В репозитории находится [файл](files/marketplaces.xlsx), который можно отправить боту для тестирования.
